<!doctype html>
<html lang="zh-CN" xmlns:link="http://www.w3.org/1999/XSL/Transform">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="{{ url_for('static', filename='lib/bootstrap-4.3.1/css/bootstrap.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='AudioPlayer/css/audioplayer.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
	<link rel="shortcut icon" href="{{ url_for('static', filename='imgs/favicon.ico') }}">
    <title>Ozone</title>
</head>

<body>
    <!-- Navigation -->
    {% if session.logged_in %}
        <nav class="navbar-dark navbar navbar-expand-md">
            <a class="navbar-brand" href="#">Ozone</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.index') }}">主页</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('message.show_message', page=1) }}">留言</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('column.show_essay', title='all', page=1) }}">专栏</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('album.show_photo') }}">相册</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">管理</a>
                        <div class="dropdown-menu">
                            <a href="{{ url_for('main.manage', function='message') }}" class="dropdown-item">留言</a>
                            <div class="dropdown-divider"></div>
                            <a href="{{ url_for('main.manage', function='column') }}" class="dropdown-item">专栏</a>
                            <div class="dropdown-divider"></div>
                            <a href="{{ url_for('main.manage', function='album') }}" class="dropdown-item">相册</a>
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav float-right">
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('main.logout') }}">注销</a></li>
                </ul>
            </div>
        </nav>
    {% endif %}
    {% for message in get_flashed_messages(with_categories=True) %}
    <div class="alert alert-{{ message[0] }} alert-dismissable fade show">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>{{ message[1] }}</strong>
    </div>
    {% endfor %}

    {% if not session.logged_in %}
        <!-- Navigation bar without login -->
        <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#" style="color: #FFFFFF;">Ozone</a>
                </div>
            </div>
        </nav>

        <!-- Carousel -->
        <div class="exhibition-heading">
            <br>
            <div class="container">
                <div class="carousel-container">
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                      <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                      </ol>
                      <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active">
                          <img class="d-block img-fluid" src="{{ url_for('static', filename='imgs/carousel1.jpg') }}" alt="First slide">
                        </div>
                        <div class="carousel-item">
                          <img class="d-block img-fluid" src="{{ url_for('static', filename='imgs/carousel1.jpg') }}" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                          <img class="d-block img-fluid" src="{{ url_for('static', filename='imgs/carousel1.jpg') }}" alt="Third slide">
                        </div>
                      </div>
                      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                      </a>
                      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                      </a>
                    </div>
                </div>
                <div>
                    <h2 style="text-align: center;color: #FFFFFF;">Ozone</h2>
                    <h6 style="text-align: center;color: #FFFFFF;">汪先森&小笨笨</h6>
                </div>
                {% if not session.logged_in %}
                <div class="d-flex justify-content-center">
                    <p><a role="button" href="{{ url_for('main.login') }}" class="btn btn-login btn-sm">登录</a></p>
                </div>
                {% endif %}
                <br>
            </div>
        </div>
    {% endif %}


    {% if session.logged_in %}
        <div class="container carpet">

            <br>
            <!-- Favorite song -->
            <div class="container fav-container">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#playlist1">汪先森</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#playlist2">小笨笨</a>
                    </li>
                </ul>
                 <!-- Tab panes -->
                <div class="tab-content">
                    <div id="playlist1" class="container tab-pane active">
                        <div class="card fav-card exhibition">
                            <div class="card-header">
                                <h3 class="card-title text-white">汪先森最近喜欢的音乐</h3>
                            </div>
                            <div class="card-body">
                                <ul class="list-group">
                                    {% for song in playlist1 %}
                                    <li class="list-group-item">
                                        <h4 class="card-text"><span class="badge">NO.{{ loop.index }}</span> {{ song[0] }}</h4>
                                        <audio controls>
                                            <source src="{{ url_for('static', filename='songs/') }}{{ song[1] }}.mp3" />
                                                <source src="{{ url_for('static', filename='songs/') }}{{ song[1] }}.ogg" />
                                        </audio>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div id="playlist2" class="container tab-pane fade">
                        <div class="card fav-card exhibition">
                            <div class="card-header">
                                <h3 class="card-title text-white">小笨笨最近喜欢的音乐</h3>
                            </div>
                            <div class="card-body">
                                <ul class="list-group">
                                    {% for song in playlist2 %}
                                    <li class="list-group-item">
                                        <h4 class="card-text"><span class="badge">NO.{{ loop.index }}</span> {{ song[0] }}</h4>
                                        <audio controls>
                                            <source src="{{ url_for('static', filename='songs/') }}{{ song[1] }}.mp3" />
                                                <source src="{{ url_for('static', filename='songs/') }}{{ song[1] }}.ogg" />
                                        </audio>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <br>

            <!-- exhibition -->
            <div class="container exhibition-column-container">
                <div class="card exhibition-column-card exhibition">
                    <div class="card-header">
                        <h3 class="card-title text-white">精选专栏</h3>
                    </div>
                    <div class="card-body">
                        {% if exhibition %}
                            {% for item in exhibition %}
                                <div class="card exhibition">
                                    <div class="card-body">
                                        <h3 class="card-title">{{ item.title }}</h3>
                                        <p class="card-text">{{ item.content|striptags|my_truncate(255) }}</p>
                                        <a href="{{ url_for('column.show_essay', title=item.title, page=1) }}" class="card-link float-right">more</a>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="row">
                                <div class="col-sm-8 offset-sm-2">
                                    <h4>专栏空空如也, 快去写一写吧</h4>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
{#                <br>#}
{#                {% if exhibition %}#}
{#                <div class="row">#}
{#                    <div class="col-sm-2"></div>#}
{#                    <div class="col-sm-4">#}
{#                        {% if exhibition[0] %}#}
{#                        <div class="card exhibition">#}
{#                            <div class="card-body">#}
{#                                <h1 class="card-title">{{ exhibition[0].title }}</h1>#}
{#                                <p class="card-text">{{ exhibition[0].content|striptags|my_truncate(255) }}</p>#}
{#                                <a href="{{ url_for('column.show_essay', title=exhibition[0].title, page=1) }}" class="card-link float-right">更多</a>#}
{#                            </div>#}
{#                        </div>#}
{#                        {% endif %}#}
{#                    </div>#}
{#                    <div class="col-sm-4">#}
{#                        {% if exhibition[1] %}#}
{#                        <div class="card exhibition">#}
{#                            <div class="card-body">#}
{#                                <h1 class="card-title">{{ exhibition[1].title }}</h1>#}
{#                                <p class="card-text">{{ exhibition[1].content|striptags|my_truncate(255) }}</p>#}
{#                                <a href="{{ url_for('column.show_essay', title=exhibition[1].title, page=1) }}" class="card-link float-right">更多</a>#}
{#                            </div>#}
{#                        </div>#}
{#                        {% endif %}#}
{#                    </div>#}
{#                    <div class="col-sm-2"></div>#}
{#                </div>#}
{#                <br>#}
{#                <br>#}
{#                <div class="row">#}
{#                    <div class="col-sm-2"></div>#}
{#                    <div class="col-sm-4">#}
{#                        {% if exhibition[2] %}#}
{#                        <div class="card exhibition">#}
{#                            <div class="card-body">#}
{#                                <h1 class="card-title">{{ exhibition[2].title }}</h1>#}
{#                                <p class="card-text">{{ exhibition[2].content|striptags|my_truncate(255) }}</p>#}
{#                                <a href="{{ url_for('column.show_essay', title=exhibition[2].title, page=1) }}" class="card-link float-right">更多</a>#}
{#                            </div>#}
{#                        </div>#}
{#                        {% endif %}#}
{#                    </div>#}
{#                    <div class="col-sm-4">#}
{#                        {% if exhibition[3] %}#}
{#                        <div class="card exhibition">#}
{#                            <div class="card-body">#}
{#                                <h1 class="card-title">{{ exhibition[3].title }}</h1>#}
{#                                <p class="card-text">{{ exhibition[3].content|striptags|my_truncate(255) }}</p>#}
{#                                <a href="{{ url_for('column.show_essay', title=exhibition[3].title, page=1) }}" class="card-link float-right">更多</a>#}
{#                            </div>#}
{#                        </div>#}
{#                        {% endif %}#}
{#                    </div>#}
{#                    <div class="col-sm-2"></div>#}
{#                </div>#}
{#                {% else %}#}
{#                <div class="row">#}
{#                        <div class="col-sm-8 offset-sm-2">#}
{#                            <h4>专栏空空如也, 快去写一写吧</h4>#}
{#                        </div>#}
{#                    </div>#}
{#                {% endif %}#}
            </div>
        </div>
    {% endif %}
</body>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="{{ url_for('static', filename='tinymce/js/tinymce/tinymce.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/tinymce_setup.js') }}"></script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>
<script src="{{ url_for('static', filename='lib/bootstrap-4.3.1/js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='AudioPlayer/js/jquery.js') }}"></script>
<script src="{{ url_for('static', filename='AudioPlayer/js/audioplayer.js') }}"></script>
<script>
	$(function() {
		$('audio').audioPlayer();
	});
</script>

<br>
<br>
<br>
<br>
<br>
<br>
<footer>
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-bottom justify-content-center">
		<a class="navbar-brand" href="{{ url_for('main.index') }}">Ozone</a>
		<span class="navbar-text">
			Made by Wen Copyright&copy; 2018-2019. All rights reserved.
		</span>
	</nav>
</footer>

</html>
